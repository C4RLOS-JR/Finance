{% extends 'bases/base.html' %}
{% load static %}

{% block 'head' %}
  <link href="{% static 'perfil/css/home.css' %}" rel="stylesheet">
  <link href="{% static 'perfil/css/gerenciar.css' %}" rel="stylesheet">
{% endblock %}

{% block 'body' %}
  <br>
  <div class="container">

    <!--Mensagens-->
    <div class="row messages">
      {% if messages %}
        {% for message in messages %}
          <div class="alert {{message.tags}}" role="alert">{{message}}</div>
        {% endfor %}
      {% endif %}
    </div>
    <br>

    <div class="row">

      <!--Suas Contas-->
      <div class="col-md-5">
        <p class="fonte-destaque">Suas contas</p>
        <hr>

        {% for conta in contas %}
          <div class="contas">

            <div class="lista-contas-main">
              <span><img class="icone-banco" src="{{conta.icone.url}}">&nbsp&nbsp{{conta.nome}}</span>
              <span class="total-conta {% if conta.valor > 0 %} positivo {% elif conta.valor < 0 %} negativo {% endif %}">R$ {{conta.valor|floatformat:2}}&nbsp&nbsp&nbsp <a href="{% url 'excluir_banco' conta.id %}"><img src="{% static 'perfil/img/delete.png' %}"></a></span>
            </div>
            
          </div> 
          <hr>
        {% endfor %}

        <span class="fonte-destaque">Total:</span>
        <span class="total-conta font-destaque valor-total {% if valor_total > 0 %} positivo {% elif valor_total < 0 %} negativo {% endif %}">R$ {{valor_total|floatformat:2}}</span>
      </div>

      <div class="col-md-2"></div>

      <!--Nova Conta-->
      <div class="col-md-5 card-nova">
        <p class="fonte-destaque">Nova conta</p>
          
        <form action="{% url 'cadastrar_banco' %}" method="POST" enctype="multipart/form-data"> {% csrf_token %}
          <label>Nome da conta</label>
          <input type="text" name="nome" class="form-control" placeholder="Nome">
          <br>
          <label>Banco</label>
          <select name="banco" class="form-select">
              <option value="">Escolha um banco</option>
              <option value="NU">NuBank</option>
              <option value="CE">Caixa Econômica</option>
              <option value="MP">Mercado Pago</option>
          </select>
          <br>
          <label>Tipo</label>
          <select name="tipo" class="form-select">
              <option value="pf">Pessoa física</option>
              <option value="pj">Pessoa jurídica</option>
          </select>
          <br>
          <label>Valor</label>
          <input type="number" name="valor" class="form-control" placeholder="R$" step="0.01">
          <br>
          <label>Icone</label>
          <br>
          <input type="file" placeholder="Ícone" name="icone">
          <br>
          <br>
          <input style="width: 100%" type="submit" class="botao-principal" value="Adicionar Conta">
        </form>
      </div>
    </div>
    <hr>

    <div class="row">

      <!--Suas Categorias-->
      <div class="col-md-5">
        <span class="fonte-destaque">Suas categoria</span>
        <br>
        <br>

        <div class="itens-categoria">
          <span>Categoria</span>
          <span class="total-categoria">Essencial</span>
        </div>
        <hr>

        <div class="contas">
          {% for categoria in categorias %}
            <div class="lista-contas-main">
              <span>{{categoria}}</span>
              
              <span class="total-conta img"><a href="{% url 'update_categoria' categoria.id %}"><img src="{% if categoria.essencial %} {% static 'perfil/img/essencial.png' %} {% else %} {% static 'perfil/img/nao_essencial.png' %} {% endif %}"></a></span>
            </div>
            <hr>
          {% endfor %}
        </div>
      </div>

      <div class="col-md-2"></div>

      <!--Nova Categoria-->
      <div class="col-md-5 card-nova">
        <p class="fonte-destaque">Nova categoria</p>

        <form action="{% url 'cadastrar_categoria' %}" method="POST"> {% csrf_token %}
          <label>Categoria</label>
          <input type="text" name="categoria" class="form-control">
          <br>

          <input type="checkbox" name="essencial" value="essencial"><label>&nbspEssencial</label>
          <br>
          <br>
          <input style="width: 100%" type="submit" class="botao-principal" value="Adicionar Categoria">
        </form>
      </div>
    </div>
  </div>


{% endblock %}