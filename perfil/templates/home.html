{% extends 'bases/base.html' %}
{% load static %}

{% block 'head' %}
  <link rel="stylesheet" href="{% static 'perfil/css/home.css' %}">
{% endblock  %}

{% block 'body' %}
  <div class="container">
    <br>
      <!--Mensagens-->
      <div class="row messages">
        {% if messages %}
          {% for message in messages %}
            <div class="alert {{message.tags}}" role="alert">{{message}}</div>
          {% endfor %}
        {% endif %}
      </div>
    <br>

    <div class="row">
      <div class="col-md-3">
        <a style="text-decoration: none; color: white;" href="{% url 'movimentacao' %}">
          <div class="card">
            <div class="row">
              <div class="col-md">
                <img class="icones" src="{% static 'perfil/img/entradas.png' %}">
              </div>
              <div class="col-md-8">
                <span  class="fonte-destaque">Entrada</span>
              </div>
            </div>

          </div>
        </a>
      </div>
      <div class="col-md-3">
        <a style="text-decoration: none; color: white;" href="{% url 'movimentacao' %}">
          <div class="card">
            <div class="row">
              <div class="col-md">
                <img class="icones" src="{% static 'perfil/img/saidas.png' %}">
              </div>
              <div class="col-md-8">
                <span  class="fonte-destaque">Saída</span>
              </div>
            </div> 
          </div>
        </a>
      </div>
      <div class="col-md-3">
        <a style="text-decoration: none; color: white;" href="#">
          <div class="card">
            <div class="row">
              <div class="col-md">
                <img class="icones" src="{% static 'perfil/img/transferencia.png' %}">
              </div>
              <div class="col-md-8">
                <span  class="fonte-destaque">Tranferência</span>
              </div>
            </div> 
          </div>
        </a>
      </div>
      <div class="col-md-3">
        <a style="text-decoration: none; color: white;" href="{% url 'extrato' %}">
          <div class="card">
            <div class="row">
              <div class="col-md">
                <img class="icones" src="{% static 'perfil/img/extrato.png' %}">
              </div>
              <div class="col-md-8">
                <span  class="fonte-destaque">Extrato</span>
              </div>
            </div> 
          </div>
        </a>
      </div>
    </div>
    <br>
    <br>
    
    <div class="row">

      <div class="col-md-4">
        <!-- Suas contas -->
        <div class="card">
          <span class="fonte-destaque destaque">Suas contas</span>
          <br>
          <div class="div-contas">
            {% for conta in contas %}
            <div class="lista-conta">
              <span>{{conta.nome}}</span>
              <span class="total-conta {% if conta.valor > 0 %} positivo {% elif conta.valor < 0 %} negativo {% endif %}">R$ {{conta.valor|floatformat:2}}</span>
            </div>
            <br>
            {% endfor %}
          </div>

          <div>
            <span class="fonte-destaque">Saldo total</span>
            <span class="font-light valor-total {% if valor_total_contas > 0 %} positivo {% elif valor_total_contas < 0 %} negativo {% endif %}">R$ {{valor_total_contas|floatformat:2}}</span>
          </div>
          <hr class="hr-borda">

          <a href="{% url 'gerenciar' %}" class="botao-principal">Gerenciar contas</a>
        </div>
        <br>
        <!-- Planejamento -->
        <div class="card">
          <div>
            <span class="fonte-destaque destaque">Planejamento</span>
          </div>
          <br>

          {% for categoria in categorias %}
            {% if categoria.valor_planejamento != 0 %}
              {% for saida in categoria.saidas %}
                {% if saida.tipo == 'S' %}
                  <div class="row">
                    <div class="col-md">
                      <h5 style="float: left">{{categoria}}</h5>
                    </div>
                    
                    <div class="col-md">
                      <span style="float: right !important;">
                        <span>R$ {{categoria.valor_gasto|floatformat:2}}</span>
                        <span> | </span>
                        <span class="{% if categoria.valor_planejamento > categoria.valor_gasto %} positivo {% else %} negativo {% endif %}">R$ {{categoria.valor_planejamento|floatformat:2}}</span>
                      </span>
                    </div>
                  </div>
                  <div class="progress">
                    <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: {{categoria.percentual_gasto}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                  <br>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endfor %}

          <hr class="hr-borda">

          <div class="row">
            <div class="col-md">
              <h3 style="float: left">Total</h3>
            </div>

            <div class="col-md">
              <span style="float: right !important;">
                <span>R$ {{valor_total_saidas|floatformat:2}}</span>
                <span> | </span>
                <span class="{% if valor_total_planejamento > valor_total_saidas %} positivo {% else %} negativo {% endif %}">R$ {{valor_total_planejamento|floatformat:2}}</span>
              </span>
            </div>
          </div>

          <div class="progress" style="height: 30px;">
            <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: {{percentual_planejamento}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>

          <hr class="hr-borda">
          
          <a href="{% url 'definir_planejamento' %}" class="botao-principal">Definir planejamento</a>
        </div>
      </div>

      <div class="col-md-8">
        <!-- Receita/Despesa -->
        <div class="card">
          <div class="row">
            <div class="col-md">
              <div class="receita">
                <span class="fonte-destaque">Receita mensal</span>
                <br>
                <span class="font-light">R$ {{total_entradas|floatformat:2}}</span>
              </div>
            </div>
            <div class="col-md">
              <div class="despesa">
                <span class="fonte-destaque">Despesa mensal</span>
                <br>
                <span class="font-light">R$ {{total_saidas|floatformat:2}}</span>
              </div>
            </div>

          </div>
          <hr class="hr-borda">
          <span class="fonte-destaque">Total livre</span>
          <span class="font-light">R$ 0.000,00</span>
          <hr class="hr-borda">
          <a href="#" class="botao-principal">Gerenciar dados mensais</a>
        </div>
        <br>
        <!-- Equilíbrio financeiro -->
        <div class="card">
          <span class="fonte-destaque destaque">Equilibrio financeiro</span>
          <hr class="hr-borda">

          <p>Gastos essenciais</p>
          <div class="progress">
              <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 20%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <br>
          <p>Gastos não essenciais</p>
          <div class="progress">
              <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 40%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>

          <hr class="hr-borda">
          <a href="#" class="botao-principal">Alterar categorias essenciais</a>

        </div>
        <br>
        <!-- Gerenciar contas -->
        <div class="card">
          <span class="fonte-destaque destaque">Gerenciar contas</span>
          <hr class="hr-borda">

          <span class="fonte-destaque">Próximas do vencimento</span>
          <span class="fonte-light">3 contas próximas do vencimento</span>
          <br>
          <span class="fonte-destaque negativo">Vencidas</span>
          <span class="fonte-light">0 contas vencidas</span>

          <hr class="hr-borda">
          
          <a href="#" class="botao-principal">Ver mais</a>

        </div>
      </div>
    </div>
    <br>
    <br>
  </div>
{% endblock %}